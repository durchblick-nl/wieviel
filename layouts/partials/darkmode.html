<script>
const DarkMode = {
    STORAGE_KEY: 'darkMode',
    init() {
        const saved = localStorage.getItem(this.STORAGE_KEY);
        if (saved === 'true' || (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.setAttribute('data-theme', 'dark');
        }
        this.updateIcon();
    },
    toggle() {
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark');
        localStorage.setItem(this.STORAGE_KEY, !isDark);
        this.updateIcon();
    },
    updateIcon() {
        const icon = document.querySelector('.dark-mode-toggle i');
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        if (icon) icon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
    }
};
DarkMode.init();
</script>
