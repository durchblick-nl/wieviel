<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tagerechner 2025 ‚Äì Tage zwischen zwei Daten berechnen | wieviel.ch</title>
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <meta name="description" content="Kostenloser Tagerechner: Berechne Tage zwischen zwei Daten, addiere/subtrahiere Tage, finde den Wochentag f√ºr jedes Datum oder z√§hle Werktage. Mit Kalenderwoche (ISO 8601).">
    <meta name="keywords" content="Tagerechner, Tage berechnen, Datum Rechner, Wochentag berechnen, Werktage z√§hlen, Kalenderwoche, Tage zwischen Daten">
    <link rel="canonical" href="https://wieviel.ch/tage/">
    <link rel="alternate" hreflang="de" href="https://wieviel.ch/tage/">
    <link rel="alternate" hreflang="fr" href="https://calcule.ch/jours/">
    <meta property="og:title" content="Tagerechner ‚Äì Tage zwischen zwei Daten berechnen">
    <meta property="og:description" content="Berechne Tage zwischen Daten, addiere Tage, finde Wochentage oder z√§hle Werktage.">
    <meta property="og:url" content="https://wieviel.ch/tage/">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="de_CH">
    <meta property="og:site_name" content="wieviel.ch">
    <meta property="og:image" content="https://wieviel.ch/icons/icon-512.png">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Tagerechner ‚Äì Tage zwischen zwei Daten berechnen">
    <meta name="twitter:description" content="Berechne Tage zwischen Daten, addiere Tage, finde Wochentage oder z√§hle Werktage.">
    <meta name="twitter:image" content="https://wieviel.ch/icons/icon-512.png">
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Tagerechner",
        "url": "https://wieviel.ch/tage/",
        "description": "Berechne Tage zwischen zwei Daten, addiere/subtrahiere Tage, finde den Wochentag oder z√§hle Werktage.",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Web",
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "CHF" }
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "Wie berechne ich die Tage zwischen zwei Daten?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Gib einfach das Start- und Enddatum ein. Der Rechner zeigt dir die Differenz in Tagen, Wochen, Monaten und Jahren. Du kannst auch w√§hlen, ob das Enddatum mitgez√§hlt werden soll (inklusiv)."
                }
            },
            {
                "@type": "Question",
                "name": "Was ist die Kalenderwoche (KW)?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Die Kalenderwoche wird nach ISO 8601 berechnet. Die erste Woche des Jahres ist die Woche mit dem ersten Donnerstag. Eine Woche beginnt am Montag und hat die Nummern 1-52 (manchmal 53)."
                }
            },
            {
                "@type": "Question",
                "name": "Was sind Werktage?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Werktage sind Montag bis Freitag. Samstag und Sonntag werden nicht mitgez√§hlt. Feiertage werden in diesem Rechner nicht ber√ºcksichtigt, da sie je nach Kanton unterschiedlich sind."
                }
            }
        ]
    }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Economica:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        .mode-tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .mode-tab { flex: 1; min-width: 120px; padding: 1rem; border: 2px solid var(--border-color); border-radius: 12px; background: var(--card-bg); cursor: pointer; text-align: center; transition: all 0.2s; color: var(--text-color); }
        .mode-tab:hover { border-color: var(--primary-color); }
        .mode-tab.active { border-color: var(--primary-color); background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; }
        .mode-tab i { font-size: 1.5rem; display: block; margin-bottom: 0.5rem; }
        .mode-tab.active i { color: white; }
        .mode-tab:not(.active) i { color: var(--primary-color); }
        .mode-tab span { font-size: 0.85rem; font-weight: 600; }

        .calc-section { display: none; }
        .calc-section.active { display: block; }

        .date-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0; }
        .date-input { display: flex; flex-direction: column; gap: 0.5rem; }
        .date-input label { font-weight: 600; color: var(--text-color); }
        .date-input input { padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 8px; font-size: 1rem; background: var(--input-bg); color: var(--text-color); }
        .date-input input:focus { border-color: var(--primary-color); outline: none; }

        .single-date { max-width: 300px; }

        .number-input { display: flex; align-items: center; gap: 1rem; margin: 1rem 0; }
        .number-input input { width: 120px; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 8px; font-size: 1.25rem; text-align: center; background: var(--input-bg); color: var(--text-color); }
        .number-input select { padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 8px; font-size: 1rem; background: var(--input-bg); color: var(--text-color); }

        .result-box { padding: 2rem; border-radius: 16px; text-align: center; margin: 1.5rem 0; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; }
        .result-box .main-result { font-size: 3.5rem; font-weight: bold; font-family: 'Economica', sans-serif; line-height: 1; }
        .result-box .main-result small { font-size: 1.5rem; }
        .result-box .sub-result { font-size: 1.1rem; margin-top: 0.5rem; opacity: 0.9; }

        .breakdown-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin: 1.5rem 0; }
        .breakdown-card { background: var(--light-bg); border: 1px solid var(--border-color); border-radius: 12px; padding: 1rem; text-align: center; }
        .breakdown-card .value { font-size: 2rem; font-weight: bold; color: var(--primary-color); font-family: 'Economica', sans-serif; }
        .breakdown-card .label { font-size: 0.85rem; color: var(--text-color); margin-top: 0.25rem; }

        .weekday-result { padding: 1.5rem; border-radius: 12px; text-align: center; margin: 1rem 0; }
        .weekday-result.montag { background: linear-gradient(135deg, #3498db, #2980b9); color: white; }
        .weekday-result.dienstag { background: linear-gradient(135deg, #9b59b6, #8e44ad); color: white; }
        .weekday-result.mittwoch { background: linear-gradient(135deg, #2ecc71, #27ae60); color: white; }
        .weekday-result.donnerstag { background: linear-gradient(135deg, #e67e22, #d35400); color: white; }
        .weekday-result.freitag { background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; }
        .weekday-result.samstag { background: linear-gradient(135deg, #1abc9c, #16a085); color: white; }
        .weekday-result.sonntag { background: linear-gradient(135deg, #f39c12, #f1c40f); color: white; }
        .weekday-result .day-name { font-size: 2.5rem; font-weight: bold; font-family: 'Economica', sans-serif; }
        .weekday-result .date-formatted { font-size: 1.1rem; margin-top: 0.5rem; opacity: 0.9; }
        .weekday-result .kw { font-size: 0.95rem; margin-top: 0.5rem; opacity: 0.8; }

        .option-toggle { display: flex; align-items: center; gap: 0.75rem; margin: 1rem 0; }
        .option-toggle input[type="checkbox"] { width: 20px; height: 20px; cursor: pointer; }
        .option-toggle label { cursor: pointer; color: var(--text-color); }

        .today-btn { background: var(--secondary-color); color: white; padding: 0.5rem 1rem; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; margin-left: 0.5rem; }
        .today-btn:hover { background: var(--primary-color); }

        .share-buttons { display: flex; gap: 0.5rem; justify-content: center; margin-top: 1.5rem; flex-wrap: wrap; }
        .share-btn { padding: 0.75rem 1.25rem; border-radius: 8px; border: none; cursor: pointer; font-size: 0.9rem; display: flex; align-items: center; gap: 0.5rem; transition: all 0.2s; }
        .share-btn.whatsapp { background: #25D366; color: white; }
        .share-btn.copy { background: var(--secondary-color); color: white; }
        .share-btn:hover { transform: translateY(-2px); }

        @media (max-width: 600px) {
            .date-inputs { grid-template-columns: 1fr; }
            .mode-tabs { gap: 0.25rem; }
            .mode-tab { min-width: 70px; padding: 0.75rem 0.5rem; }
            .mode-tab i { font-size: 1.2rem; }
            .mode-tab span { font-size: 0.75rem; }
            .result-box .main-result { font-size: 2.5rem; }
        }

        /* FAQ Styles */
        .faq-section { display: flex; flex-direction: column; gap: 0.5rem; margin-top: 1rem; }
        .faq-item { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden; }
        .faq-item summary { padding: 1rem; cursor: pointer; font-weight: 600; color: var(--text-color); list-style: none; display: flex; justify-content: space-between; align-items: center; }
        .faq-item summary::-webkit-details-marker { display: none; }
        .faq-item summary::after { content: '+'; font-size: 1.25rem; color: var(--primary-color); }
        .faq-item[open] summary::after { content: '‚àí'; }
        .faq-item[open] summary { border-bottom: 1px solid var(--border-color); background: var(--light-bg); }
        .faq-item p { padding: 1rem; margin: 0; font-size: 0.95rem; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-row">
            <button type="button" class="dark-mode-toggle" aria-label="Dunkelmodus" onclick="DarkMode.toggle()">
                <i class="fas fa-moon"></i>
            </button>
            <div class="language-switcher">
                <span class="lang-btn active">DE</span>
                <a href="https://calcule.ch/jours/" class="lang-btn">FR</a>
            </div>
        </div>

        <div class="page-header">
            <h1><span class="title-icon">üìÖ</span>Tagerechner</h1>
            <p class="page-subtitle">Tage z√§hlen, Datum berechnen</p>
        </div>

        <nav class="tool-nav">
            <a href="../">Alle Tools</a>
        </nav>

        <div class="steps-container">
            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-calendar-alt"></i>
                    <div class="step-number">1</div>
                </div>
                <div class="step-content">
                    <h3>Modus w√§hlen</h3>
                    <p>Tage z√§hlen, Datum berechnen oder Wochentag finden?</p>
                </div>
            </div>

            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-calendar-day"></i>
                    <div class="step-number">2</div>
                </div>
                <div class="step-content">
                    <h3>Datum eingeben</h3>
                    <p>Start- und/oder Enddatum ausw√§hlen.</p>
                </div>
            </div>

            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-calculator"></i>
                    <div class="step-number">3</div>
                </div>
                <div class="step-content">
                    <h3>Ergebnis</h3>
                    <p>Tage, Wochen, Monate ‚Äì alles auf einen Blick.</p>
                </div>
            </div>
        </div>

        <div class="calculator-card">
            <div class="mode-tabs">
                <button type="button" class="mode-tab active" data-mode="difference" onclick="setMode('difference')">
                    <i class="fas fa-arrows-left-right"></i>
                    <span>Tage z√§hlen</span>
                </button>
                <button type="button" class="mode-tab" data-mode="add" onclick="setMode('add')">
                    <i class="fas fa-plus-minus"></i>
                    <span>Datum +/‚àí</span>
                </button>
                <button type="button" class="mode-tab" data-mode="weekday" onclick="setMode('weekday')">
                    <i class="fas fa-calendar-week"></i>
                    <span>Wochentag</span>
                </button>
                <button type="button" class="mode-tab" data-mode="workdays" onclick="setMode('workdays')">
                    <i class="fas fa-briefcase"></i>
                    <span>Werktage</span>
                </button>
            </div>

            <!-- Mode 1: Difference between dates -->
            <div id="section-difference" class="calc-section active">
                <h3><i class="fas fa-arrows-left-right"></i> Tage zwischen zwei Daten</h3>
                <p style="color: var(--text-color); margin-bottom: 1rem;">Wie viele Tage liegen zwischen zwei Daten?</p>

                <div class="date-inputs">
                    <div class="date-input">
                        <label>Startdatum</label>
                        <div style="display: flex; align-items: center;">
                            <input type="date" id="diffStart" onchange="calculateDifference()">
                            <button type="button" class="today-btn" onclick="setToday('diffStart')">Heute</button>
                        </div>
                    </div>
                    <div class="date-input">
                        <label>Enddatum</label>
                        <div style="display: flex; align-items: center;">
                            <input type="date" id="diffEnd" onchange="calculateDifference()">
                            <button type="button" class="today-btn" onclick="setToday('diffEnd')">Heute</button>
                        </div>
                    </div>
                </div>

                <div class="option-toggle">
                    <input type="checkbox" id="includeEndDate" onchange="calculateDifference()">
                    <label for="includeEndDate">Enddatum mitz√§hlen (inklusiv)</label>
                </div>

                <div id="diffResult" class="result-box" style="display: none;">
                    <div class="main-result"><span id="diffDays">0</span> <small>Tage</small></div>
                    <div class="sub-result" id="diffWeeks"></div>
                </div>

                <div id="diffBreakdown" class="breakdown-grid" style="display: none;">
                    <div class="breakdown-card">
                        <div class="value" id="diffYears">0</div>
                        <div class="label">Jahre</div>
                    </div>
                    <div class="breakdown-card">
                        <div class="value" id="diffMonths">0</div>
                        <div class="label">Monate</div>
                    </div>
                    <div class="breakdown-card">
                        <div class="value" id="diffWeeksOnly">0</div>
                        <div class="label">Wochen</div>
                    </div>
                    <div class="breakdown-card">
                        <div class="value" id="diffDaysOnly">0</div>
                        <div class="label">Tage</div>
                    </div>
                </div>
            </div>

            <!-- Mode 2: Add/Subtract days -->
            <div id="section-add" class="calc-section">
                <h3><i class="fas fa-plus-minus"></i> Tage zu Datum addieren/subtrahieren</h3>
                <p style="color: var(--text-color); margin-bottom: 1rem;">Welches Datum ist X Tage vor oder nach einem Datum?</p>

                <div class="date-input single-date">
                    <label>Ausgangsdatum</label>
                    <div style="display: flex; align-items: center;">
                        <input type="date" id="addStart" onchange="calculateAdd()">
                        <button type="button" class="today-btn" onclick="setToday('addStart')">Heute</button>
                    </div>
                </div>

                <div class="number-input">
                    <select id="addOperation" onchange="calculateAdd()">
                        <option value="add">+</option>
                        <option value="subtract">‚àí</option>
                    </select>
                    <input type="number" id="addDays" value="30" min="0" max="99999" onchange="calculateAdd()">
                    <select id="addUnit" onchange="calculateAdd()">
                        <option value="days">Tage</option>
                        <option value="weeks">Wochen</option>
                        <option value="months">Monate</option>
                        <option value="years">Jahre</option>
                    </select>
                </div>

                <div id="addResult" class="result-box" style="display: none;">
                    <div class="main-result" id="addResultDate"></div>
                    <div class="sub-result" id="addResultWeekday"></div>
                </div>
            </div>

            <!-- Mode 3: Weekday -->
            <div id="section-weekday" class="calc-section">
                <h3><i class="fas fa-calendar-week"></i> Wochentag ermitteln</h3>
                <p style="color: var(--text-color); margin-bottom: 1rem;">Welcher Wochentag ist/war ein bestimmtes Datum?</p>

                <div class="date-input single-date">
                    <label>Datum</label>
                    <div style="display: flex; align-items: center;">
                        <input type="date" id="weekdayDate" onchange="calculateWeekday()">
                        <button type="button" class="today-btn" onclick="setToday('weekdayDate')">Heute</button>
                    </div>
                </div>

                <div id="weekdayResult" class="weekday-result" style="display: none;">
                    <div class="day-name" id="weekdayName"></div>
                    <div class="date-formatted" id="weekdayFormatted"></div>
                    <div class="kw" id="weekdayKW"></div>
                </div>
            </div>

            <!-- Mode 4: Working days -->
            <div id="section-workdays" class="calc-section">
                <h3><i class="fas fa-briefcase"></i> Werktage berechnen</h3>
                <p style="color: var(--text-color); margin-bottom: 1rem;">Wie viele Arbeitstage (Mo-Fr) liegen zwischen zwei Daten?</p>

                <div class="date-inputs">
                    <div class="date-input">
                        <label>Startdatum</label>
                        <div style="display: flex; align-items: center;">
                            <input type="date" id="workStart" onchange="calculateWorkdays()">
                            <button type="button" class="today-btn" onclick="setToday('workStart')">Heute</button>
                        </div>
                    </div>
                    <div class="date-input">
                        <label>Enddatum</label>
                        <div style="display: flex; align-items: center;">
                            <input type="date" id="workEnd" onchange="calculateWorkdays()">
                            <button type="button" class="today-btn" onclick="setToday('workEnd')">Heute</button>
                        </div>
                    </div>
                </div>

                <div class="option-toggle">
                    <input type="checkbox" id="includeWorkEndDate" onchange="calculateWorkdays()">
                    <label for="includeWorkEndDate">Enddatum mitz√§hlen (inklusiv)</label>
                </div>

                <div id="workResult" class="result-box" style="display: none;">
                    <div class="main-result"><span id="workDays">0</span> <small>Werktage</small></div>
                    <div class="sub-result" id="workWeeks"></div>
                </div>

                <div id="workBreakdown" class="breakdown-grid" style="display: none;">
                    <div class="breakdown-card">
                        <div class="value" id="workTotal">0</div>
                        <div class="label">Kalendertage</div>
                    </div>
                    <div class="breakdown-card">
                        <div class="value" id="workWeekends">0</div>
                        <div class="label">Wochenendtage</div>
                    </div>
                    <div class="breakdown-card">
                        <div class="value" id="workWorkdays">0</div>
                        <div class="label">Werktage</div>
                    </div>
                    <div class="breakdown-card">
                        <div class="value" id="workWeeksCount">0</div>
                        <div class="label">Arbeitswochen</div>
                    </div>
                </div>
            </div>

            <div class="share-buttons">
                <button class="share-btn whatsapp" onclick="shareWhatsApp()">
                    <i class="fab fa-whatsapp"></i> Teilen
                </button>
                <button class="share-btn copy" onclick="copyResult()">
                    <i class="fas fa-copy"></i> Kopieren
                </button>
            </div>
        </div>

        <div class="info-cards-container">
            <div class="info-step-card">
                <div class="step-icon"><i class="fas fa-info-circle"></i></div>
                <div class="step-content">
                    <h3>Schaltjahre</h3>
                    <p>Der Rechner ber√ºcksichtigt automatisch Schaltjahre. Ein Schaltjahr hat 366 Tage (29. Februar). Schaltjahre sind durch 4 teilbar, ausser Jahrhunderte (ausser durch 400 teilbar).</p>
                    <p style="margin-top: 0.5rem;"><strong>Beispiele:</strong> 2024 ‚úì, 2000 ‚úì, 1900 ‚úó, 2100 ‚úó</p>
                </div>
            </div>

            <div class="info-step-card">
                <div class="step-icon"><i class="fas fa-calendar-check"></i></div>
                <div class="step-content">
                    <h3>Kalenderwochen (KW)</h3>
                    <p>Die Kalenderwoche wird nach <strong>ISO 8601</strong> berechnet. Die erste Kalenderwoche ist die Woche mit dem ersten Donnerstag des Jahres.</p>
                    <p style="margin-top: 0.5rem;">Eine Woche beginnt am Montag und endet am Sonntag.</p>
                </div>
            </div>

            <div class="info-step-card">
                <div class="step-icon"><i class="fas fa-briefcase"></i></div>
                <div class="step-content">
                    <h3>Werktage vs. Arbeitstage</h3>
                    <p><strong>Werktage:</strong> Montag bis Freitag (5 Tage pro Woche), ohne Feiertage.</p>
                    <p style="margin-top: 0.5rem;"><strong>Hinweis:</strong> Feiertage werden in diesem Rechner nicht ber√ºcksichtigt. F√ºr Fristen nutze <a href="https://frist.ch" target="_blank">frist.ch</a>.</p>
                </div>
            </div>

            <div class="info-step-card">
                <div class="step-icon"><i class="fas fa-lightbulb"></i></div>
                <div class="step-content">
                    <h3>Anwendungsbeispiele</h3>
                    <ul style="margin: 0.5rem 0;">
                        <li>Wie viele Tage bis zum Urlaub?</li>
                        <li>Wann ist 90 Tage nach heute?</li>
                        <li>An welchem Wochentag bin ich geboren?</li>
                        <li>Wie viele Arbeitstage hat ein Projekt?</li>
                    </ul>
                </div>
            </div>
        </div>

        <section class="seo-content">
            <h3>H√§ufige Fragen zum Tagerechner</h3>
            <div class="faq-section">
                <details class="faq-item">
                    <summary>Wie berechnet man Werktage zwischen zwei Daten?</summary>
                    <p><strong>Werktage</strong> sind Montag bis Freitag ohne Feiertage. Dieser Rechner z√§hlt automatisch die Arbeitstage zwischen zwei Daten ‚Äì ideal f√ºr Projekt&shy;planung, Fristen oder Urlaubsberechnung.</p>
                </details>
                <details class="faq-item">
                    <summary>Werden Feiertage ber√ºcksichtigt?</summary>
                    <p>Dieser Rechner z√§hlt <strong>Montag bis Freitag als Werktage</strong>. Kantonale Feiertage werden nicht automatisch abgezogen, da diese je nach Kanton unterschiedlich sind.</p>
                </details>
                <details class="faq-item">
                    <summary>Wie funktioniert die Kalenderwochenberechnung?</summary>
                    <p>Die <strong>Kalenderwoche (KW)</strong> wird nach ISO 8601 berechnet: Woche 1 ist die erste Woche mit mindestens 4 Tagen im neuen Jahr. Wochen beginnen am Montag.</p>
                </details>
                <details class="faq-item">
                    <summary>Kann ich auch Monate oder Jahre addieren?</summary>
                    <p>Ja, im Modus ¬´Datum +/‚àí¬ª kannst du <strong>Tage, Wochen, Monate oder Jahre</strong> zu einem Datum addieren oder davon abziehen. Praktisch f√ºr Fristen, K√ºndigungsfristen oder Meilensteine.</p>
                </details>
            </div>
        </section>
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <p><a href="https://durchblick.nl" target="_blank">Durchblick Consultancy BV</a></p>
            <p class="footer-disclaimer">Alle Angaben ohne Gew√§hr.</p>
            <p class="footer-privacy">Alle Berechnungen erfolgen lokal. Keine Daten werden gespeichert.</p>
        </div>
    </footer>

    <script>
        let currentMode = 'difference';

        const WEEKDAYS = ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'];
        const WEEKDAYS_SHORT = ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'];
        const MONTHS = ['Januar', 'Februar', 'M√§rz', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'];

        function setMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.mode === mode);
            });
            document.querySelectorAll('.calc-section').forEach(section => {
                section.classList.toggle('active', section.id === 'section-' + mode);
            });
        }

        function setToday(inputId) {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById(inputId).value = today;
            // Trigger calculation
            if (inputId.startsWith('diff')) calculateDifference();
            else if (inputId.startsWith('add')) calculateAdd();
            else if (inputId.startsWith('weekday')) calculateWeekday();
            else if (inputId.startsWith('work')) calculateWorkdays();
        }

        function formatDate(date) {
            return date.getDate() + '. ' + MONTHS[date.getMonth()] + ' ' + date.getFullYear();
        }

        function getISOWeek(date) {
            const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
            const dayNum = d.getUTCDay() || 7;
            d.setUTCDate(d.getUTCDate() + 4 - dayNum);
            const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
            return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
        }

        function calculateDifference() {
            const startInput = document.getElementById('diffStart').value;
            const endInput = document.getElementById('diffEnd').value;
            const inclusive = document.getElementById('includeEndDate').checked;

            if (!startInput || !endInput) {
                document.getElementById('diffResult').style.display = 'none';
                document.getElementById('diffBreakdown').style.display = 'none';
                return;
            }

            const start = new Date(startInput);
            const end = new Date(endInput);

            let diffTime = Math.abs(end - start);
            let diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            if (inclusive) diffDays += 1;

            const weeks = Math.floor(diffDays / 7);
            const remainingDays = diffDays % 7;

            // Calculate years, months, days breakdown
            let years = 0, months = 0, days = 0;
            let tempDate = new Date(Math.min(start, end));
            const endDate = new Date(Math.max(start, end));

            while (tempDate.getFullYear() < endDate.getFullYear() ||
                   (tempDate.getFullYear() === endDate.getFullYear() && tempDate.getMonth() < endDate.getMonth())) {
                tempDate.setMonth(tempDate.getMonth() + 1);
                months++;
            }
            years = Math.floor(months / 12);
            months = months % 12;

            // Remaining days
            days = Math.floor((endDate - tempDate) / (1000 * 60 * 60 * 24));
            if (inclusive) days += 1;

            document.getElementById('diffDays').textContent = diffDays.toLocaleString('de-CH');
            document.getElementById('diffWeeks').textContent = `= ${weeks} Wochen und ${remainingDays} Tage`;

            document.getElementById('diffYears').textContent = years;
            document.getElementById('diffMonths').textContent = months;
            document.getElementById('diffWeeksOnly').textContent = weeks;
            document.getElementById('diffDaysOnly').textContent = remainingDays;

            document.getElementById('diffResult').style.display = 'block';
            document.getElementById('diffBreakdown').style.display = 'grid';
        }

        function calculateAdd() {
            const startInput = document.getElementById('addStart').value;
            const operation = document.getElementById('addOperation').value;
            const amount = parseInt(document.getElementById('addDays').value) || 0;
            const unit = document.getElementById('addUnit').value;

            if (!startInput) {
                document.getElementById('addResult').style.display = 'none';
                return;
            }

            const date = new Date(startInput);
            const multiplier = operation === 'subtract' ? -1 : 1;

            switch (unit) {
                case 'days':
                    date.setDate(date.getDate() + (amount * multiplier));
                    break;
                case 'weeks':
                    date.setDate(date.getDate() + (amount * 7 * multiplier));
                    break;
                case 'months':
                    date.setMonth(date.getMonth() + (amount * multiplier));
                    break;
                case 'years':
                    date.setFullYear(date.getFullYear() + (amount * multiplier));
                    break;
            }

            const weekday = WEEKDAYS[date.getDay()];
            document.getElementById('addResultDate').textContent = formatDate(date);
            document.getElementById('addResultWeekday').textContent = weekday + ' (KW ' + getISOWeek(date) + ')';
            document.getElementById('addResult').style.display = 'block';
        }

        function calculateWeekday() {
            const dateInput = document.getElementById('weekdayDate').value;

            if (!dateInput) {
                document.getElementById('weekdayResult').style.display = 'none';
                return;
            }

            const date = new Date(dateInput);
            const weekday = WEEKDAYS[date.getDay()];
            const weekdayClass = weekday.toLowerCase();
            const kw = getISOWeek(date);

            const resultBox = document.getElementById('weekdayResult');
            resultBox.className = 'weekday-result ' + weekdayClass;

            document.getElementById('weekdayName').textContent = weekday;
            document.getElementById('weekdayFormatted').textContent = formatDate(date);
            document.getElementById('weekdayKW').textContent = 'Kalenderwoche ' + kw + ' / ' + date.getFullYear();
            resultBox.style.display = 'block';
        }

        function calculateWorkdays() {
            const startInput = document.getElementById('workStart').value;
            const endInput = document.getElementById('workEnd').value;
            const inclusive = document.getElementById('includeWorkEndDate').checked;

            if (!startInput || !endInput) {
                document.getElementById('workResult').style.display = 'none';
                document.getElementById('workBreakdown').style.display = 'none';
                return;
            }

            const start = new Date(startInput);
            const end = new Date(endInput);

            let current = new Date(Math.min(start, end));
            const endDate = new Date(Math.max(start, end));

            let workdays = 0;
            let weekends = 0;
            let totalDays = 0;

            while (current <= endDate) {
                totalDays++;
                const dayOfWeek = current.getDay();
                if (dayOfWeek !== 0 && dayOfWeek !== 6) {
                    workdays++;
                } else {
                    weekends++;
                }
                current.setDate(current.getDate() + 1);
            }

            // If not inclusive, subtract 1 from appropriate counter
            if (!inclusive && totalDays > 0) {
                totalDays--;
                const lastDay = new Date(endDate).getDay();
                if (lastDay !== 0 && lastDay !== 6) {
                    workdays--;
                } else {
                    weekends--;
                }
            }

            const workWeeks = (workdays / 5).toFixed(1);

            document.getElementById('workDays').textContent = workdays.toLocaleString('de-CH');
            document.getElementById('workWeeks').textContent = `= ${workWeeks} Arbeitswochen`;

            document.getElementById('workTotal').textContent = totalDays;
            document.getElementById('workWeekends').textContent = weekends;
            document.getElementById('workWorkdays').textContent = workdays;
            document.getElementById('workWeeksCount').textContent = workWeeks;

            document.getElementById('workResult').style.display = 'block';
            document.getElementById('workBreakdown').style.display = 'grid';
        }

        function getShareText() {
            let text = 'üìÖ Tagerechner\n\n';

            if (currentMode === 'difference') {
                const days = document.getElementById('diffDays').textContent;
                const weeks = document.getElementById('diffWeeks').textContent;
                text += `üìä ${days} Tage\n${weeks}\n`;
            } else if (currentMode === 'add') {
                const result = document.getElementById('addResultDate').textContent;
                const weekday = document.getElementById('addResultWeekday').textContent;
                text += `üìÜ ${result}\n${weekday}\n`;
            } else if (currentMode === 'weekday') {
                const day = document.getElementById('weekdayName').textContent;
                const date = document.getElementById('weekdayFormatted').textContent;
                text += `üìÜ ${date}\n= ${day}\n`;
            } else if (currentMode === 'workdays') {
                const days = document.getElementById('workDays').textContent;
                text += `üíº ${days} Werktage\n`;
            }

            text += '\nBerechnet mit wieviel.ch/tage';
            return text;
        }

        function shareWhatsApp() {
            window.open('https://wa.me/?text=' + encodeURIComponent(getShareText()), '_blank');
        }

        function copyResult() {
            navigator.clipboard.writeText(getShareText()).then(() => {
                const btn = document.querySelector('.share-btn.copy');
                btn.innerHTML = '<i class="fas fa-check"></i> Kopiert!';
                setTimeout(() => btn.innerHTML = '<i class="fas fa-copy"></i> Kopieren', 2000);
            });
        }

        const DarkMode = {
            STORAGE_KEY: 'darkMode',
            init() {
                const saved = localStorage.getItem(this.STORAGE_KEY);
                if (saved === 'true' || (saved === null && window.matchMedia('(prefers-color-scheme: dark)').matches)) this.enable(false);
                this.updateButton();
            },
            enable(save = true) { document.documentElement.setAttribute('data-theme', 'dark'); if (save) localStorage.setItem(this.STORAGE_KEY, 'true'); this.updateButton(); },
            disable(save = true) { document.documentElement.removeAttribute('data-theme'); if (save) localStorage.setItem(this.STORAGE_KEY, 'false'); this.updateButton(); },
            toggle() { document.documentElement.getAttribute('data-theme') === 'dark' ? this.disable() : this.enable(); },
            updateButton() { const btn = document.querySelector('.dark-mode-toggle i'); if (btn) btn.className = document.documentElement.getAttribute('data-theme') === 'dark' ? 'fas fa-sun' : 'fas fa-moon'; }
        };

        // Initialize
        DarkMode.init();

        // Set today's date as default
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('diffStart').value = today;
        document.getElementById('addStart').value = today;
        document.getElementById('weekdayDate').value = today;
        document.getElementById('workStart').value = today;

        // Set end date to 30 days from now
        const future = new Date();
        future.setDate(future.getDate() + 30);
        document.getElementById('diffEnd').value = future.toISOString().split('T')[0];
        document.getElementById('workEnd').value = future.toISOString().split('T')[0];

        // Initial calculations
        calculateDifference();
        calculateAdd();
        calculateWeekday();
        calculateWorkdays();
    </script>
</body>
</html>
